{
  "version": 2,
  "buildCommand": "npm run build",
  "outputDirectory": "build",
  "installCommand": "npm install",
  "framework": "create-react-app",
  "functions": {
    "api/**/*.js": {
      "maxDuration": 60
    }
  },
  "rewrites": [
    {
      "source": "/api/courses",
      "destination": "/api/courses.js"
    },
    {
      "source": "/api/community/channels",
      "destination": "/api/community/channels.js"
    },
    {
      "source": "/api/community/channels/:channelId/messages",
      "destination": "/api/community/channels/messages.js?channelId=:channelId"
    },
    {
      "source": "/api/community/channels/:channelId/messages/:messageId",
      "destination": "/api/community/channels/messages.js?channelId=:channelId&messageId=:messageId"
    },
    {
      "source": "/api/stripe/create-subscription",
      "destination": "/api/stripe/create-subscription.js"
    },
    {
      "source": "/api/stripe/direct-checkout",
      "destination": "/api/stripe/direct-checkout.js"
    },
    {
      "source": "/api/auth/login",
      "destination": "/api/auth/login.js"
    },
    {
      "source": "/api/auth/register",
      "destination": "/api/auth/register.js"
    },
    {
      "source": "/api/auth/password-reset",
      "destination": "/api/auth/password-reset.js"
    },
    {
      "source": "/api/auth/forgot-password",
      "destination": "/api/auth/password-reset.js"
    },
    {
      "source": "/api/auth/signup-verification",
      "destination": "/api/auth/signup-verification.js"
    },
    {
      "source": "/api/auth/send-signup-verification",
      "destination": "/api/auth/signup-verification.js"
    },
    {
      "source": "/api/auth/verify-signup-code",
      "destination": "/api/auth/signup-verification.js"
    },
    {
      "source": "/api/auth/send-mfa",
      "destination": "/api/auth/mfa.js"
    },
    {
      "source": "/api/auth/verify-mfa",
      "destination": "/api/auth/mfa.js"
    },
    {
      "source": "/api/community/users",
      "destination": "/api/community/index.js"
    },
    {
      "source": "/api/admin/user-status",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/contact",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/community/update-presence",
      "destination": "/api/community/index.js"
    },
    {
      "source": "/api/subscription/check",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/stripe/subscription-success",
      "destination": "/api/stripe/index.js"
    },
    {
      "source": "/api/stripe/webhook",
      "destination": "/api/stripe/index.js"
    },
    {
      "source": "/api/stripe/create-subscription",
      "destination": "/api/stripe/index.js"
    },
    {
      "source": "/api/stripe/direct-checkout",
      "destination": "/api/stripe/index.js"
    },
    {
      "source": "/api/admin",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/admin/users",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/admin/users/:userId/role",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/admin/users/:userId",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/admin/give-xp",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/admin/revoke-access",
      "destination": "/api/admin/index.js"
    },
    {
      "source": "/api/leaderboard",
      "destination": "/api/leaderboard.js"
    },
    {
      "source": "/api/messages/threads",
      "destination": "/api/messages/threads.js"
    },
    {
      "source": "/api/messages/threads/ensure-admin",
      "destination": "/api/messages/threads.js"
    },
    {
      "source": "/api/messages/threads/:threadId/messages",
      "destination": "/api/messages/threads.js"
    },
    {
      "source": "/api/messages/threads/:threadId/read",
      "destination": "/api/messages/threads.js"
    },
    {
      "source": "/api/messages/threads/ensure-user/:userId",
      "destination": "/api/messages/threads.js"
    },
    {
      "source": "/api/users/update-xp",
      "destination": "/api/users/update-xp.js"
    },
    {
      "source": "/api/users/level-up-notification",
      "destination": "/api/users/level-up-notification.js"
    },
    {
      "source": "/api/users/:userId/update",
      "destination": "/api/users/update.js?userId=:userId"
    },
    {
      "source": "/api/users/:userId",
      "destination": "/api/users/update.js?userId=:userId"
    },
    {
      "source": "/api/users/daily-login",
      "destination": "/api/users/daily-login.js"
    },
    {
      "source": "/api/users/public-profile/:userId",
      "destination": "/api/users/update.js?userId=:userId"
    },
    {
      "source": "/api/ai/premium-chat",
      "destination": "/api/ai/premium-chat.js"
    },
    {
      "source": "/api/chatbot",
      "destination": "/api/chatbot.js"
    },
    {
      "source": "/api/ai/market-data",
      "destination": "/api/ai/market-data.js"
    },
    {
      "source": "/api/ai/forex-factory",
      "destination": "/api/ai/forex-factory.js"
    },
    {
      "source": "/api/ai/forex-factory-calendar",
      "destination": "/api/ai/forex-factory-calendar.js"
    },
    {
      "source": "/api/ai/market-news",
      "destination": "/api/ai/market-news.js"
    },
    {
      "source": "/api/ai/trading-calculator",
      "destination": "/api/ai/trading-calculator.js"
    },
    {
      "source": "/api/tradingview-webhook",
      "destination": "/api/ai/tradingview-webhook.js"
    },
    {
      "source": "/api/ai/fundamentals",
      "destination": "/api/ai/fundamentals.js"
    },
    {
      "source": "/api/admin/kb-ingest",
      "destination": "/api/admin/kb-ingest.js"
    },
    {
      "source": "/api/admin/ai-debug",
      "destination": "/api/admin/ai-debug.js"
    },
    {
      "source": "/api/users/friends",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/requests",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/request",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/accept",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/reject",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/status/:userId",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/friends/:friendId",
      "destination": "/api/users/friends.js"
    },
    {
      "source": "/api/users/settings",
      "destination": "/api/users/settings.js"
    },
    {
      "source": "/api/ai/health",
      "destination": "/api/ai/health.js"
    },
    {
      "source": "/api/cron/refresh-leaderboard",
      "destination": "/api/cron/refresh-leaderboard.js"
    },
    {
      "source": "/api/seed/demo-leaderboard",
      "destination": "/api/seed/demo-leaderboard.js"
    },
    {
      "source": "/api/notifications",
      "destination": "/api/notifications/index.js"
    },
    {
      "source": "/api/notifications/:id/read",
      "destination": "/api/notifications/index.js"
    },
    {
      "source": "/api/notifications/read-all",
      "destination": "/api/notifications/index.js"
    },
    {
      "source": "/api/friends/list",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/requests/incoming",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/requests/outgoing",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/request",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/accept",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/decline",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/cancel",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/remove",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/friends/status/:userId",
      "destination": "/api/friends/index.js"
    },
    {
      "source": "/api/messages/locate",
      "destination": "/api/messages/locate.js"
    }
  ],
  "crons": [
    {
      "path": "/api/cron/refresh-leaderboard",
      "schedule": "*/5 * * * *"
    }
  ]
}
